<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <link rel="stylesheet" href="../static/layui/css/layui.css"/>
    <title>student</title>
    <style>
        body{
            margin:0px;
            background: #f4f4f4;
            height:100%; 
            overflow-y: scroll;
            min-height:100%;
            box-sizing:border-box;
            padding-bottom: 180px;
            min-width: 1000px;
            position: relative!important;
            display: block;
        }
        header{
            width:100%;
            min-width: 1000px;
            box-shadow: 0 1px 0 0 #ddd;
            height:80px;
            background:#fff;
            margin-bottom: 40px;
        }
        header .top{
            width:1000px;
            margin:0 auto;
            background:url(../static/logo.jpg) no-repeat;
            background-size: 100px 80px;
        }
        header .top h1{
            display:inline-block;
            margin-left:120px;
            line-height: 80px;
        }
        header .top button{
            margin-left:450px;
            margin-top:-10px;
        }
        section{
            
            width:100%;
            margin:0 auto;    
            min-height:600px;
            display:block;
            margin-bottom:30px;           
        }
        section div#container{
            background:#fff;
            width:1000px;
            margin:0 auto
        }
        footer{
            padding-top: 40px;
            height: 100px;
            box-sizing: border-box;
            text-align: center;
            position: absolute;
            bottom: 0;
            width: 100%;
            left: 0;
            background: #444547;
            font-size: 12px;
            min-height: 28px;
            
        }
        footer p{
            color: #777;
            line-height: 24px;
        }
    </style>
</head>
<body>
    <header>
        <div class="top">
            <h1>华为 实习生管理信息系统</h1>           
            <button class="layui-btn" id="sign_out">退出</button>
        </div>
    </header>
    <section>
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" id="container">
                <ul class="layui-tab-title">
                  <li class="layui-this">个人中心</li>
                  <li>培养计划</li>
                  <li>我的留言</li>
                  <li>月度总结</li>
                  <li>修改登录密码</li>
                </ul>
                <div class="layui-tab-content">
                  
                  <div class="layui-tab-item layui-show">
                    <form class="layui-form" action="">
                                   <!--个人中心-->
                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">姓名</label>
                            <div class="layui-input-inline">
                            <input type="text" name="name" required="required" class="layui-input" id="name"/>
                            </div>
                        </div>

                        <div class="layui-form-item"  lay-filter="user_message">
                            <label class="layui-form-label">工号</label>
                            <div class="layui-input-inline">
                            <input type="text" name="job_number" required="required" class="layui-input" id="job_number"/>
                            </div>

                            <label class="layui-form-label">联系方式</label>
                            <div class="layui-input-inline">
                            <input type="text" name="phone_number" value="111111" lay-verify="required"  class="layui-input" id="phone_number" required="required"/>
                            </div>
                        </div>

                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">性别</label>
                            <div class="layui-input-inline">
                            <input type="radio" name="sex" value="男" title="男" checked="checked"/>
                            <input type="radio" name="sex" value="女" title="女" />
                            </div>

                            <label class="layui-form-label">身份证号</label>
                            <div class="layui-input-inline">
                                <input type="text" name="id_number" required="required" class="layui-input"/>
                            </div>
                        </div>

                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">邮箱地址</label>
                            <div class="layui-input-inline">
                            <input type="text" id="email_addr" required="required" class="layui-input" />
                            </div>

                            <label class="layui-form-label">学历</label>
                            <div class="layui-input-inline">
                                <select name="city" lay-verify="required">
                                    <option value="0">请选择学历</option>
                                    <option value="1">博士</option>
                                    <option value="2">硕士</option>
                                    <option value="3">本科</option>
                                  </select>
                            </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                                <label class="layui-form-label">毕业院校</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="graduate_college"/>
                                </div>
    
                                <label class="layui-form-label">专业</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="major"/>
                                </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                                <label class="layui-form-label">签约岗位</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="job"/>
                                </div>
    
                                <label class="layui-form-label">签约方向</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="job_direction"/>
                                </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">工作地</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="place"/>
                            </div>

                            <label class="layui-form-label">入职时间</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="hire_time"/>
                            </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                                <label class="layui-form-label">所在一级部门</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="first_dept"/>
                                </div>
    
                                <label class="layui-form-label">所在二级部门</label>
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" id="second_dept"/>
                                </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">部门HR姓名</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="hr_name"/>
                            </div>

                            <label class="layui-form-label">部门HR工号</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="hr_job_number"/>
                            </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                            <label class="layui-form-label">导师姓名</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input"  id="teacher_name"/>
                            </div>

                            <label class="layui-form-label">导师工号</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="teacher_job_number"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">离职时间</label>
                            <div class="layui-input-block">
                                <input type="text" class="layui-input" id="leave_date"/>
                            </div>
                        </div>

                        <div class="layui-form-item  layui-form-text">
                            <label class="layui-form-label">离职原因</label>
                            <div class="layui-input-block">
                                <textarea name="reason" placeholder="请输入内容" class="layui-textarea" style="height:100px;"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item" lay-filter="user_message">
                            <div class="layui-input-block">
                            <button class="layui-btn" lay-submit="lay-submit" lay-filter="formDemo">保存修改</button>
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                            </div>
                        </div>

                    </form>
                        
                  </div>

                  <!--培养计划-->
                  <div class="layui-tab-item">
                    <!-- <table id="plan" lay-filter="plan"></table>
                    <div id="plan_page" style="text-align:center"></div> -->
                    <!-- 测试 -->
                    <table class="layui-table" lay-data="{id:'student_plan',page:true}">
                        <thead>
                                <tr>
                                    <!-- <th lay-data="{field:'month'}">
                                            月份
                                    </th> -->
                                    <th>培养目标</th>
                                    <th id="target" colspan="4" style="background:#fff;"></th>
                                </tr>
                                <tr>
                                    <th lay-data="{field:'month'}" rowspan="4" id="month">月份</th>
                                    <th lay-data="{field:'period'}">时间</th>
                                    <th lay-data="{field:'knowledge'}">知识点及掌握程度</th>
                                    <th lay-data="{field:'material'}">学习材料</th>
                                    <th lay-data="{field:'inspect'}">输出及考核方式</th>
                                </tr>
                        </thead>
                        
                    </table>
                    <div id="plan_page" style="text-align:center"></div>
                    <!--测试-->
                  </div>
                  
                  <!--我的留言-->
                  <div class="layui-tab-item">
                        <div class="layui-row">
                                <div class="layui-inline">
                                    <button class="layui-btn" data-type="getCheckData" isMaximize="0"
                                            id="add" topHeight="600px">
                                            <i class="layui-icon">&#xe654;</i>新增
                                    </button>
                        
                                    <a href="javascript:;" layadmin-event="refresh" title="刷新">
                                        <button class="layui-btn" id="refresh">
                                                <i class="layui-icon">&#x1002;</i>刷新
                                        </button>
                                    </a>
                                </div>
                        
                            </div>
                            <table class="layui-hide" id="message_table" lay-filter="message_table">
                            </table>
                            
                  </div>
                  <!--月度总结-->
                  <div class="layui-tab-item">
                        <form class="layui-form  layui-form-pane" action="">
                                <div class="layui-form-item  layui-form-pane">
                                        <label class="layui-form-label">个人总结</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="summary" placeholder="请输入内容" />
                                        </div>
                                        <label class="layui-form-label">个人总结</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="summary" placeholder="请输入内容" />
                                        </div>
                                    </div>
                            <div class="layui-form-item  layui-form-pane">
                                <label class="layui-form-label">个人总结</label>
                                <div class="layui-input-block">
                                    <textarea name="summary" placeholder="请输入内容" class="layui-textarea"></textarea>
                                </div>
                            </div>
                               <div class="layui-form-item">
                                <div class="layui-input-block">
                                <button class="layui-btn" lay-filter="formDemo" style="float:right;">提交</button>
                                </div>
                            </div>
                        </form>
                  </div>
                    <!--修改登录密码-->
                        <div class="layui-tab-item">
                                <form>
                                    <div class="layui-form-item" lay-filter="">
                                        <label class="layui-form-label">输入密码</label>
                                        <div class="layui-input-block">
                                            <input type="password" class="layui-input"  id="psw1"/>
                                        </div>
                                    </div>
                                    <div class="layui-form-item" lay-filter="">
                                        <label class="layui-form-label">确认密码</label>
                                        <div class="layui-input-block">
                                            <input type="text" class="layui-input" id="psw2"/>
                                        </div>
                                    </div>
                                    <div class="layui-form-item" lay-filter="">
                                        <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit="lay-submit" lay-filter="modifypsw">提交修改</button>
                                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                        </div>
                                    </div>
                                </form>        
                                    
                                
                        </div>

                </div>
              </div>
            </section>
            <footer>
                <p>
                    Copyright
                </p>
            </footer>
              <script src="../static/layui/layui.js"></script>
              <script>
              //注意：选项卡 依赖 element 模块，否则无法进行功能性操作
              layui.use(['element', 'form','laydate',"table","jquery","laypage"],function(){
                window.jQuery = window.$ = layui.jquery;
                var element = layui.element,//元素操作
                    form=layui.form,//表单操作
                    laydate=layui.laydate,//日期操作
                    table = layui.table,//表格
                    laypage=layui.laypage;//分页
                    laydate.render({
                        elem:"#hire_time"//指定日期元素
                    });
                    laydate.render({
                        elem:"#leave_date"//指定日期元素
                    });
                //个人中心
                    //通过后台取得个人信息  渲染个人中心
                    form.render();
                     //修改个人信息  提交到后台 并重新渲染页面
                    
                    form.on('submit(formDemo)',function(data){
                        $.ajax({
                        url: '',
                        dataType: 'json',
                        method: 'post',
                        success: function(data) {
                            $(data.data).each(function(index){                       
                                form.render(null, 'user_message');
                                layer.msg('修改成功',{time:1000});
                            });
                            form.render();
                        },
                        error: function() {
                            alert('error:请求出错！');
                        }
                    });
                    })
                //培养计划 
                    //分页实例
                    laypage.render({
                        elem: 'plan_page' //分页容器的id
                        ,count: 60 //总页数
                        ,prev:'上个月'
                        ,next:'下个月'
                        ,skin: '#1E9FFF' //自定义选中色值
                        ,jump: function(obj){
                            //alert(obj.curr);
                            var month=obj.curr;
                            table.reload('student_plan',{
                                url:'/plan/selectDetailByStu'
                                ,where:{month:month}
                                });
                            //ajax请求获取 培训目标
                            $.ajax({
                                type:"get",//提交类型
                                url:"/plan/selectByStu",//请求的地址
                                data:{
                                    month:month,//月份
                                },//提交的数据
                                dataType:"json",//返回的类型 json
                                success:function(data){
                                    //需要返回该学生的计划中的培训目标
                                    $('#target').html(data.target);

                                },
                                error:function(){
                                    layer.msg("请求异常，请重试");
                                }
                            });


                        }
                    });
                //我的留言
                    //方法渲染，执行一个 table留言 实例
                    table.render({
                        elem: '#message_table'
                        ,url: '' //数据接口
                        ,page: true //开启分页
                        ,cols: [[ //表头                   
                            {field: 'type', title: '留言类型', width:150, align:'center',fixed: 'left'}
                            ,{fixed: 'message', title:'勇敢星有话说', align:'center',fixed:'right'}
                        ]]
                    });
                    //新增留言
                    $('#add').on('click', function() {
                        //layer.msg('Hello World');
                        layer.open({
                            type : 2,
                            area : [ '600px', '400px' ],
                            title: ['留言', 'font-size:18px;'],
                            fixed : false, //不固定
                            maxmin : true,
                            content : '../templates/student/student_addMessage.html',
                            end : function() {
                                layui.index.render();
                            }
                        });
                    });





                            //方法渲染，执行一个 table 实例
            table.render({
                elem: '#test'
                ,height: 332
                ,url: '/demo/table/user/' //数据接口
                ,page: true //开启分页
                ,cols: [[ //表头
                    {field: 'id', title: 'ID', width:200, align:'center', sort: true, fixed: 'left'}
                    ,{fixed: 'right', title:'留言', align:'center', toolbar: '#barDemo'}
                ]]
            });

            //监听工具条
            table.on('tool(demo)', function(obj){ //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"
                var data = obj.data //获得当前行数据
                    ,layEvent = obj.event; //获得 lay-event 对应的值
                if(layEvent === 'detail'){
                    layer.msg('查看操作');
                }
            });



              //退出按钮功能
              $('#sign_out').click(function(){
                                window.open('../templates/login.html','_self')
                            });
              });
              </script>
                    
    
</body>
</html>